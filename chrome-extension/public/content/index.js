(()=>{"use strict";var t={545:(t,e,a)=>{a.d(e,{G:()=>n});var n,o=function(t,e,a,n){return new(a||(a=Promise))((function(o,r){function s(t){try{i(n.next(t))}catch(t){r(t)}}function c(t){try{i(n.throw(t))}catch(t){r(t)}}function i(t){var e;t.done?o(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(s,c)}i((n=n.apply(t,e||[])).next())}))};!function(t){t.FETCH_MARKET_DATA="FETCH_MARKET_DATA",t.ANALYZE_SIGNALS="ANALYZE_SIGNALS"}(n||(n={})),chrome.runtime.onInstalled.addListener((()=>{console.log("Trading Assistant Extension installed"),chrome.storage.local.set({activeSymbols:["MSFT","AAPL","GOOGL"],refreshInterval:6e4,notificationsEnabled:!0})})),chrome.runtime.onMessage.addListener(((t,e,a)=>{switch(t.type){case n.FETCH_MARKET_DATA:!function(t){o(this,void 0,void 0,(function*(){try{yield chrome.storage.local.set({lastMarketData:t}),console.log("Market data updated:",t)}catch(t){console.error("Error handling market data:",t)}}))}(t.data);break;case n.ANALYZE_SIGNALS:!function(t){o(this,void 0,void 0,(function*(){const e=[];return t.price>0&&e.push({type:"BUY",confidence:.85,timestamp:Date.now()}),e}))}(t.data);break;default:console.log("Unknown message type:",t.type)}return!0}))}},e={};function a(n){var o=e[n];if(void 0!==o)return o.exports;var r=e[n]={exports:{}};return t[n](r,r.exports,a),r.exports}a.d=(t,e)=>{for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var n=a(545);(new class{constructor(){this.lastUpdate=0,this.updateInterval=5e3,this.observer=new MutationObserver(this.handleDOMChanges.bind(this))}start(){this.observer.observe(document.body,{childList:!0,subtree:!0}),this.extractInitialData()}handleDOMChanges(t){const e=Date.now();e-this.lastUpdate>this.updateInterval&&(this.extractInitialData(),this.lastUpdate=e)}extractInitialData(){const t=this.extractMarketData();t&&chrome.runtime.sendMessage({type:n.G.FETCH_MARKET_DATA,data:t})}extractMarketData(){try{return window.location.hostname.includes("tradingview.com")?this.extractTradingViewData():window.location.hostname.includes("yahoo.com")?this.extractYahooFinanceData():null}catch(t){return console.error("Error extracting market data:",t),null}}extractTradingViewData(){const t=document.querySelector('[data-name="last"]'),e=document.querySelector('[data-name="volume"]'),a=document.querySelector(".chart-container [data-symbol]");return t&&e&&a?{symbol:a.getAttribute("data-symbol")||"",price:parseFloat(t.textContent||"0"),volume:parseFloat(e.textContent||"0"),timestamp:Date.now()}:null}extractYahooFinanceData(){const t=document.querySelector('[data-test="qsp-price"]'),e=document.querySelector('[data-test="qsp-volume"]'),a=document.querySelector('[data-test="qsp-symbol"]');return t&&e&&a?{symbol:a.textContent||"",price:parseFloat(t.textContent||"0"),volume:parseFloat(e.textContent||"0"),timestamp:Date.now()}:null}}).start()})();